# 2025年南安普敦联合学院系统设计与计算控制实践作业 
这是一个基于Arduino Uno的倒立摆PID控制系统项目。系统使用超声波传感器检测摆杆位置，通过PID算法计算控制量，驱动舵机保持摆杆在垂直位置。

## 项目结构

```
.
├── include/          # 头文件目录
├── lib/              # 库文件目录
├── src/              # 源代码目录
├── test/             # 测试目录
├── platformio.ini    # PlatformIO配置文件
└── README.md         # 项目说明文件
```

## 硬件组成

- Arduino Uno
- 舵机 (Servo)
- 超声波传感器 (HC-SR04)
- 倒立摆机械结构

## 软件依赖

- Arduino framework
- Servo library
- NewPing library

## 功能特性

1. **PID控制算法**：实现标准PID控制器，包含比例、积分、微分三个环节
2. **超声波测距**：使用HC-SR04超声波传感器检测摆杆位置
3. **数据滤波**：采用均值滤波和卡尔曼滤波提高测量精度
4. **时间片轮询**：使用时间片轮询机制管理多个任务
5. **串口通信**：支持通过串口发送调试信息和接收控制命令

## 主要组件

### PID控制器 (pid.h/pid.cpp)
- 实现标准PID控制算法
- 支持输出限幅和积分限幅
- 可配置PID参数

### 时间片管理 (time_slice.h/time_slice.cpp)
- 实现基于时间片的任务调度机制
- 支持不同周期的任务执行

### 滤波器 (filter.h/filter.cpp)
- 均值滤波器：减少随机噪声
- 卡尔曼滤波器：提高测量精度

## 串口命令 (`comm.h/comm.cpp`)

通过串口监视器可以发送以下命令来调整PID参数：

- `kp=value`：设置比例系数
- `ki=value`：设置积分系数
- `kd=value`：设置微分系数
- `show`：显示当前PID参数
- `reset`：重置PID参数为0

## 系统工作流程

1. 超声波传感器周期性测量摆杆位置
2. 测量数据经过两级滤波处理
3. PID控制器根据目标位置和实际位置计算控制量
4. 舵机根据控制量调整角度，保持摆杆垂直

## 配置说明

### PID参数配置
在`main.cpp`中可以调整PID参数：
- Kp: 比例系数
- Ki: 积分系数
- Kd: 微分系数

### 硬件连接
- 舵机信号线连接到Arduino引脚9
- 超声波传感器Trig引脚连接到Arduino引脚7
- 超声波传感器Echo引脚连接到Arduino引脚8

## 使用方法

1. 安装PlatformIO开发环境
2. 连接硬件设备
3. 编译并上传代码到Arduino Uno
4. 通过串口监视器查看系统运行状态

## 注意事项

- 确保舵机供电充足，避免因电压不稳导致控制异常
- 超声波传感器测量距离有限，需合理设置检测范围
- PID参数需要根据实际硬件特性进行调优

\_\_||\_\_\_\_\_\||\_\_  
\_\_||\_\_\_\_\_\||\_\_  
\_\_\_\\\\\___//\_\_\_  
\_\=\=\=\=\=\=\=\_  
\_\_\_\_\_\|\|\|\_\_\_\_\_  
\_\_\_\_\_\|\|\|\_\_\_\_\_  
\_\_\_\_\_\_\|\_\_\_\_\_\_  
\_\_防伪专用\_\_